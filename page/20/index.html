<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Elain&#39;blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="致力于LINUX技术研究交流!开源一切,免费一切!!!">
<meta property="og:type" content="website">
<meta property="og:title" content="Elain'blog">
<meta property="og:url" content="http://www.elain.org/page/20/index.html">
<meta property="og:site_name" content="Elain'blog">
<meta property="og:description" content="致力于LINUX技术研究交流!开源一切,免费一切!!!">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Elain'blog">
<meta name="twitter:description" content="致力于LINUX技术研究交流!开源一切,免费一切!!!">
  
    <link rel="alternative" href="/atom.xml" title="Elain&#39;blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
      <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css" type="text/css">
  
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: true
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/avatar.png" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/">elain</a></h1>
        </hgroup>

        
        <p class="header-subtitle">致力于LINUX技术研究交流!开源一切,免费一切!!!</p>
        
        
        <form><input type="text" id="bdcsMain" class="search" placeholder=" Search..."></form>
                


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <li id="Email"><a class="Email" target="_blank" href="mailto:elain2012@hotmail.com" title="Email"></a></li>
                            
                                <li id="新浪微博"><a class="新浪微博" target="_blank" href="http://weibo.com/elain2012" title="新浪微博"></a></li>
                            
                                <li id="RSS"><a class="RSS" target="_blank" href="/atom.xml" title="RSS"></a></li>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/IT，健康/" style="font-size: 10px;">IT，健康</a> <a href="/tags/LINUX/" style="font-size: 18.89px;">LINUX</a> <a href="/tags/PXE/" style="font-size: 10px;">PXE</a> <a href="/tags/RHEL/" style="font-size: 10px;">RHEL</a> <a href="/tags/access/" style="font-size: 10px;">access</a> <a href="/tags/apache/" style="font-size: 15.56px;">apache</a> <a href="/tags/arping/" style="font-size: 10px;">arping</a> <a href="/tags/awstats/" style="font-size: 10px;">awstats</a> <a href="/tags/bash/" style="font-size: 10px;">bash</a> <a href="/tags/bashrc/" style="font-size: 11.11px;">bashrc</a> <a href="/tags/cacti/" style="font-size: 12.22px;">cacti</a> <a href="/tags/centos/" style="font-size: 12.22px;">centos</a> <a href="/tags/chattr/" style="font-size: 10px;">chattr</a> <a href="/tags/chkconfig/" style="font-size: 10px;">chkconfig</a> <a href="/tags/chmod/" style="font-size: 10px;">chmod</a> <a href="/tags/chroot/" style="font-size: 10px;">chroot</a> <a href="/tags/cobbler/" style="font-size: 10px;">cobbler</a> <a href="/tags/cookie/" style="font-size: 10px;">cookie</a> <a href="/tags/crontab/" style="font-size: 10px;">crontab</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/cwrsync/" style="font-size: 10px;">cwrsync</a> <a href="/tags/date/" style="font-size: 10px;">date</a> <a href="/tags/ddos/" style="font-size: 10px;">ddos</a> <a href="/tags/drbd/" style="font-size: 10px;">drbd</a> <a href="/tags/eaccelerator/" style="font-size: 10px;">eaccelerator</a> <a href="/tags/earth/" style="font-size: 10px;">earth</a> <a href="/tags/efk/" style="font-size: 12.22px;">efk</a> <a href="/tags/elasticsearch/" style="font-size: 14.44px;">elasticsearch</a> <a href="/tags/elk/" style="font-size: 11.11px;">elk</a> <a href="/tags/es/" style="font-size: 11.11px;">es</a> <a href="/tags/etc/" style="font-size: 10px;">etc</a> <a href="/tags/facebook/" style="font-size: 11.11px;">facebook</a> <a href="/tags/fetion/" style="font-size: 11.11px;">fetion</a> <a href="/tags/find/" style="font-size: 10px;">find</a> <a href="/tags/firefox/" style="font-size: 11.11px;">firefox</a> <a href="/tags/fluentd/" style="font-size: 12.22px;">fluentd</a> <a href="/tags/free/" style="font-size: 10px;">free</a> <a href="/tags/fstab/" style="font-size: 10px;">fstab</a> <a href="/tags/ganglia/" style="font-size: 10px;">ganglia</a> <a href="/tags/geany/" style="font-size: 10px;">geany</a> <a href="/tags/gedit/" style="font-size: 11.11px;">gedit</a> <a href="/tags/getots/" style="font-size: 10px;">getots</a> <a href="/tags/gnome/" style="font-size: 10px;">gnome</a> <a href="/tags/gnome-player/" style="font-size: 10px;">gnome player</a> <a href="/tags/graphicsmagick/" style="font-size: 10px;">graphicsmagick</a> <a href="/tags/grub/" style="font-size: 10px;">grub</a> <a href="/tags/gstm/" style="font-size: 10px;">gstm</a> <a href="/tags/ha/" style="font-size: 11.11px;">ha</a> <a href="/tags/hadoop/" style="font-size: 11.11px;">hadoop</a> <a href="/tags/heartbeat/" style="font-size: 11.11px;">heartbeat</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/httpd/" style="font-size: 11.11px;">httpd</a> <a href="/tags/imagemagick/" style="font-size: 10px;">imagemagick</a> <a href="/tags/inittab/" style="font-size: 10px;">inittab</a> <a href="/tags/innodb/" style="font-size: 10px;">innodb</a> <a href="/tags/iostat/" style="font-size: 13.33px;">iostat</a> <a href="/tags/iptables/" style="font-size: 10px;">iptables</a> <a href="/tags/ipv6/" style="font-size: 10px;">ipv6</a> <a href="/tags/it/" style="font-size: 10px;">it</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/kafka/" style="font-size: 10px;">kafka</a> <a href="/tags/keepalived/" style="font-size: 11.11px;">keepalived</a> <a href="/tags/kibana/" style="font-size: 12.22px;">kibana</a> <a href="/tags/kibana4/" style="font-size: 10px;">kibana4</a> <a href="/tags/kickstart/" style="font-size: 11.11px;">kickstart</a> <a href="/tags/lamp/" style="font-size: 12.22px;">lamp</a> <a href="/tags/last/" style="font-size: 10px;">last</a> <a href="/tags/lemp/" style="font-size: 11.11px;">lemp</a> <a href="/tags/lnmp/" style="font-size: 10px;">lnmp</a> <a href="/tags/log/" style="font-size: 11.11px;">log</a> <a href="/tags/logrotate/" style="font-size: 10px;">logrotate</a> <a href="/tags/logstash/" style="font-size: 10px;">logstash</a> <a href="/tags/lvs/" style="font-size: 13.33px;">lvs</a> <a href="/tags/mac/" style="font-size: 10px;">mac</a> <a href="/tags/mail/" style="font-size: 10px;">mail</a> <a href="/tags/memcache/" style="font-size: 10px;">memcache</a> <a href="/tags/memcached/" style="font-size: 10px;">memcached</a> <a href="/tags/michael-jackson/" style="font-size: 10px;">michael jackson</a> <a href="/tags/mongodb/" style="font-size: 14.44px;">mongodb</a> <a href="/tags/moosefs/" style="font-size: 10px;">moosefs</a> <a href="/tags/mpstat/" style="font-size: 12.22px;">mpstat</a> <a href="/tags/myisam/" style="font-size: 10px;">myisam</a> <a href="/tags/mysql/" style="font-size: 18.89px;">mysql</a> <a href="/tags/nagios/" style="font-size: 14.44px;">nagios</a> <a href="/tags/nc/" style="font-size: 10px;">nc</a> <a href="/tags/nfs/" style="font-size: 10px;">nfs</a> <a href="/tags/nginx/" style="font-size: 16.67px;">nginx</a> <a href="/tags/nosql/" style="font-size: 10px;">nosql</a> <a href="/tags/nrpe/" style="font-size: 10px;">nrpe</a> <a href="/tags/openfetion/" style="font-size: 10px;">openfetion</a> <a href="/tags/openssh/" style="font-size: 10px;">openssh</a> <a href="/tags/pagespeed/" style="font-size: 10px;">pagespeed</a> <a href="/tags/parted/" style="font-size: 10px;">parted</a> <a href="/tags/passwd/" style="font-size: 11.11px;">passwd</a> <a href="/tags/php/" style="font-size: 15.56px;">php</a> <a href="/tags/phpmyadmin/" style="font-size: 10px;">phpmyadmin</a> <a href="/tags/piranha/" style="font-size: 10px;">piranha</a> <a href="/tags/pop3/" style="font-size: 10px;">pop3</a> <a href="/tags/pptpd/" style="font-size: 10px;">pptpd</a> <a href="/tags/prework/" style="font-size: 10px;">prework</a> <a href="/tags/psmouse/" style="font-size: 10px;">psmouse</a> <a href="/tags/puppet/" style="font-size: 13.33px;">puppet</a> <a href="/tags/qq/" style="font-size: 10px;">qq</a> <a href="/tags/rabbitvcs/" style="font-size: 10px;">rabbitvcs</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/root/" style="font-size: 10px;">root</a> <a href="/tags/rrdtool/" style="font-size: 10px;">rrdtool</a> <a href="/tags/rsync/" style="font-size: 13.33px;">rsync</a> <a href="/tags/rsyslog/" style="font-size: 11.11px;">rsyslog</a> <a href="/tags/sar/" style="font-size: 11.11px;">sar</a> <a href="/tags/screen/" style="font-size: 10px;">screen</a> <a href="/tags/search-guard/" style="font-size: 10px;">search-guard</a> <a href="/tags/sersync/" style="font-size: 10px;">sersync</a> <a href="/tags/shadow/" style="font-size: 11.11px;">shadow</a> <a href="/tags/shell/" style="font-size: 17.78px;">shell</a> <a href="/tags/showslow/" style="font-size: 10px;">showslow</a> <a href="/tags/slave/" style="font-size: 10px;">slave</a> <a href="/tags/smtp/" style="font-size: 10px;">smtp</a> <a href="/tags/snort/" style="font-size: 10px;">snort</a> <a href="/tags/sort/" style="font-size: 10px;">sort</a> <a href="/tags/ssh/" style="font-size: 13.33px;">ssh</a> <a href="/tags/subversion/" style="font-size: 11.11px;">subversion</a> <a href="/tags/svn/" style="font-size: 13.33px;">svn</a> <a href="/tags/tar/" style="font-size: 10px;">tar</a> <a href="/tags/td-agent/" style="font-size: 10px;">td-agent</a> <a href="/tags/tetngine/" style="font-size: 10px;">tetngine</a> <a href="/tags/thunderbird/" style="font-size: 11.11px;">thunderbird</a> <a href="/tags/tomcat/" style="font-size: 11.11px;">tomcat</a> <a href="/tags/tomcat，多实例/" style="font-size: 10px;">tomcat，多实例</a> <a href="/tags/top/" style="font-size: 11.11px;">top</a> <a href="/tags/ubuntu/" style="font-size: 20px;">ubuntu</a> <a href="/tags/ubunut/" style="font-size: 10px;">ubunut</a> <a href="/tags/unity/" style="font-size: 10px;">unity</a> <a href="/tags/varnish/" style="font-size: 11.11px;">varnish</a> <a href="/tags/vbox/" style="font-size: 10px;">vbox</a> <a href="/tags/vi/" style="font-size: 11.11px;">vi</a> <a href="/tags/vim/" style="font-size: 13.33px;">vim</a> <a href="/tags/vmstat/" style="font-size: 12.22px;">vmstat</a> <a href="/tags/vsftpd/" style="font-size: 10px;">vsftpd</a> <a href="/tags/web/" style="font-size: 16.67px;">web</a> <a href="/tags/windows/" style="font-size: 10px;">windows</a> <a href="/tags/wine/" style="font-size: 10px;">wine</a> <a href="/tags/worker/" style="font-size: 10px;">worker</a> <a href="/tags/xhprof/" style="font-size: 10px;">xhprof</a> <a href="/tags/yakuake/" style="font-size: 10px;">yakuake</a> <a href="/tags/yslow/" style="font-size: 10px;">yslow</a> <a href="/tags/yum/" style="font-size: 12.22px;">yum</a> <a href="/tags/zend/" style="font-size: 10px;">zend</a> <a href="/tags/主从同步/" style="font-size: 10px;">主从同步</a> <a href="/tags/休息/" style="font-size: 10px;">休息</a> <a href="/tags/内核/" style="font-size: 10px;">内核</a> <a href="/tags/字体/" style="font-size: 10px;">字体</a> <a href="/tags/学习资料/" style="font-size: 10px;">学习资料</a> <a href="/tags/心情/" style="font-size: 10px;">心情</a> <a href="/tags/敏捷/" style="font-size: 10px;">敏捷</a> <a href="/tags/日志/" style="font-size: 10px;">日志</a> <a href="/tags/时间/" style="font-size: 10px;">时间</a> <a href="/tags/漏洞/" style="font-size: 10px;">漏洞</a> <a href="/tags/翻墙/" style="font-size: 11.11px;">翻墙</a> <a href="/tags/职业规划，规划，职业/" style="font-size: 11.11px;">职业规划，规划，职业</a> <a href="/tags/面板/" style="font-size: 10px;">面板</a> <a href="/tags/颜色/" style="font-size: 10px;">颜色</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://salogs.com">salogs.com</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://elain.blog.51cto.com">elain的51CTO技术博客</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://80sa.org">jesse&#39;s blog</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://openexz.sinaapp.com">OpenExz&#39;blog</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://osctools.net">开源在线工具</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://sad-pig.com">忧伤的猪&#39;sblog</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.cgzg.net">成功中国网</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://blog.itsir.org">文辉&#39;blog</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">LINUX运维工程师</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">elain</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/avatar.png" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">elain</a></h1>
            </hgroup>
            
            <p class="header-subtitle">致力于LINUX技术研究交流!开源一切,免费一切!!!</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <li id="Email"><a class="Email" target="_blank" href="mailto:elain2012@hotmail.com" title="Email"></a></li>
                            
                                <li id="新浪微博"><a class="新浪微博" target="_blank" href="http://weibo.com/elain2012" title="新浪微博"></a></li>
                            
                                <li id="RSS"><a class="RSS" target="_blank" href="/atom.xml" title="RSS"></a></li>
                            
                        </ul>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-&#39;[转载]Heartbeat详解&#39;" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/08/09/'[转载]Heartbeat详解'/" class="article-date">
      <time datetime="2011-08-09T03:08:40.000Z" itemprop="datePublished">2011-08-09</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/08/09/'[转载]Heartbeat详解'/">[转载]Heartbeat详解 </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <div align="left"><strong>配置主节点的Heartbeat</strong><br><br>&nbsp;<br><br>Heartbeat的主要配置文件有ha.cf、haresources和authkeys。在Heartbeat安装后，默认并没有这3个文件， 可以从官方网站下载得到，也可以直接从解压的源码目录中找到。在上面的安装过程中，我们已经将这3个文件放到了/etc/ha.d目录下，下面分别详细介 绍。<br><br><strong>1．主配置文件（/etc/ha.d/ha.cf）</strong><br><br>下面对ha.cf文件的每个选项进行详细介绍，其中&quot;#&quot;号后面的内容是对选项的注释说明。<br><br>1.  <span><span>#debugfile&nbsp;/var/log/ha-debug &nbsp;</span></span><br>2.  <span>logfile&nbsp;/var/log/ha-log&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#指名heartbeat的日志存放位置。 &nbsp;</span><br>3.  <span>#crm&nbsp;yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#是否开启Cluster&nbsp;Resource&nbsp;Manager（集群资源管理）功能。 &nbsp;</span><br>4.  <span>bcast&nbsp;eth1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#指明心跳使用以太网广播方式，并且是在eth1接口上进行广播。 &nbsp;</span><br>5.  <span>keepalive&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#指定心跳间隔时间为2秒（即每2秒钟在eth1上发送一次广播）。 &nbsp;</span><br>6.  <span>deadtime&nbsp;30&nbsp;#指定若备用节点在30秒内没有收到主节点的心跳信号，则立即接管主节点的服务资源。 &nbsp;</span><br>7.  <span>warntime&nbsp;10&nbsp;#指定心跳延迟的时间为10秒。当10秒钟内备份节点不能接收到主节点的 心跳信号时，就会往日志中写入一个警告日志，但此时不会切换服务。 &nbsp;</span><br>8.  <span>initdead&nbsp;120&nbsp;&nbsp;&nbsp;&nbsp;#在某些系统上，系统启动或重启之后需要经过一段时间网络才 能正常工作，该选项用于解决这种情况产生的时间间隔。取值至少为deadtime的两倍。 &nbsp;</span><br>9.  <span>udpport&nbsp;694&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#设置广播通信使用的端口，694为默认使用的端口号。 &nbsp;</span><br>10.  <span>baud&nbsp;19200&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#设置串行通信的波特率。 &nbsp;</span><br>11.  <span>#serial&nbsp;/dev/ttyS0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#选择串行通信设备，用于双机使用串口线连接的情况。 如果双机使用以太网连接，则应该关闭该选项。 &nbsp;</span><br>12.  <span>#ucast&nbsp;eth0&nbsp;192.168.1.2&nbsp;#采用网卡eth0的udp单播来组织心跳，后面跟的 IP地址应为双机对方的IP地址。 &nbsp;</span><br>13.  <span>#mcast&nbsp;eth0&nbsp;225.0.0.1&nbsp;694&nbsp;1&nbsp;0&nbsp;&nbsp;&nbsp;#采用网卡eth0的Udp多播来组织心跳， 一般在备用节点不止一台时使用。Bcast、ucast和mcast分别代表广播、单播 和多播，是组织心跳的三种方式，任选其一即可。 &nbsp;</span><br>14.  <span>auto_failback&nbsp;on&nbsp;&nbsp;&nbsp;&nbsp;#用来定义当主节点恢复后，是否将服务自动切回。 heartbeat的两台主机分别为主节点和备份节点。主节点在正常情况下占用资源 并运行所有的服务，遇到故障时把资源交给备份节点并由备份节点运行服务。在该 选项设为on的情况下，一旦主节点恢复运行，则自动获取资源并取代备份节点； 如果该选项设置为off，那么当主节点恢复后，将变为备份节点，而原来的备份节点成为主节点。 &nbsp;</span><br>15.  <span>#stonith&nbsp;baytech&nbsp;/etc/ha.d/conf/stonith.baytech&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;stonith的主 要作用是使出现问题的节点从集群环境中脱离，进而释放集群资源，避免两个节点争 用一个资源的情形发生。保证共享数据的安全性和完整性。 &nbsp;</span><br>16.  <span>#watchdog&nbsp;/dev/watchdog&nbsp;#该选项是可选配置，是通过Heartbeat来监控系统的运 行状态。使用该特性，需要在内核中载入&quot;softdog&quot;内核模块，用来生成实际的设备文件， 如果系统中没有这个内核模块，就需要指定此模块，重新编译内核。编译完成输入 &quot;insmod&nbsp;softdog&quot;加载该模块。然后输入&quot;grep&nbsp;misc&nbsp;/proc/devices&quot;(应为10)， 输入&quot;cat&nbsp;/proc/misc&nbsp;|grep&nbsp;watchdog&quot;(应为130)。最后，生成设备文件： &quot;mknod&nbsp;/dev/watchdog&nbsp;c&nbsp;10&nbsp;130&quot;&nbsp;。即可使用此功能。 &nbsp;</span><br>17.  <span>node&nbsp;node1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#主节点主机名，可以通过命令&quot;uanme&nbsp;-n&quot;查看。 &nbsp;</span><br>18.  <span>node&nbsp;node2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#备用节点主机名。 &nbsp;</span><br>19.  <span>ping&nbsp;192.168.60.1&nbsp;&nbsp;&nbsp;#选择ping的节点，ping节点选择的越好，HA集群就越强壮， 可以选择固定的路由器作为ping节点，但是最好不要选择集群中的成员作为ping节点， ping节点仅仅用来测试网络连接。 &nbsp;</span><br>20.  <span>respawn&nbsp;hacluster&nbsp;/usr/lib/heartbeat/ipfail&nbsp;#该选项是可选配置，列出与 heartbeat一起启动和关闭的进程，该进程一般是和heartbeat集成的插件，这些进程 遇到故障可以自动重新启动。最常用的进程是ipfail，此进程用于检测和处理网络故障， 需要配合ping语句指定的ping&nbsp;node来检测网络的连通性。其中hacluster表示启动ipfail进程的身份。&nbsp;</span><br><br>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/负载均衡/">负载均衡</a><a class="article-category-link" href="/categories/负载均衡/高可用/">高可用</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ha/">ha</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/heartbeat/">heartbeat</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a  href="/2011/08/09/'[转载]Heartbeat详解'/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-ganglia监控的搭建部署" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/08/08/ganglia监控的搭建部署/" class="article-date">
      <time datetime="2011-08-08T05:35:11.000Z" itemprop="datePublished">2011-08-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/08/08/ganglia监控的搭建部署/">Ganglia监控的搭建部署</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p>简述：Ganglia是UC Berkeley发起的一个开源集群监视项目，设计用于测量数以千计的节点。Ganglia的核心包含gmond、gmetad以及一个Web前端。主要是用来监控系统性能，由RRDTool工具处理数据，并生成相应的的图形显示，以Web方式直观的提供给客户端。如：cpu 、mem、硬盘利用率， I/O负载、网络流量情况等，通过曲线很容易见到每个节点的工作状态，对合理调整、分配系统资源，提高系统整体性能起到重要作用。</p>
<p>环境：CentOS 5.5 x64</p>
<p>先看下效果：</p>
<p><a href="http://www.elain.org/?attachment_id=360"><img src="http://www.elain.org/wp-content/uploads/2011/08/111-640x418.png" alt=""></a></p>
<pre><code>安装基础环境：

yum -y install httpd mysql mysql-server mysql-connector-odbc php php-mysql php-common php-pdo apr apr-util* pcre pcre-devel
</code></pre><p>wget ftp://ftp.univie.ac.at/systems/linux/dag/redhat/el5/en/x86_64/dag/RPMS/libconfuse-2.6-2.el5.rf.x86_64.rpm</p>
<pre><code>wget ftp://ftp.univie.ac.at/systems/linux/dag/redhat/el5/en/x86_64/dag/RPMS/libconfuse-devel-2.6-2.el5.rf.x86_64.rpm

rpm -ivh libconfuse*.rpm
</code></pre>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/监控艺术/">监控艺术</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cacti/">cacti</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ganglia/">ganglia</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nagios/">nagios</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/rrdtool/">rrdtool</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a  href="/2011/08/08/ganglia监控的搭建部署/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-ubuntu下使用gSTM+Firefox实现翻墙" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/08/08/ubuntu下使用gSTM+Firefox实现翻墙/" class="article-date">
      <time datetime="2011-08-08T00:52:06.000Z" itemprop="datePublished">2011-08-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/08/08/ubuntu下使用gSTM+Firefox实现翻墙/">ubuntu下使用gSTM+Firefox实现翻墙</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p>首先,先安装gstm,一款可以将SSH 转为 sockets的软件</p>
<pre><code>sudo apt-get install gstm
</code></pre><p>打开gstm,应用程序=&gt;互联网=&gt;gSTM&nbsp;&nbsp; 点 添加 输入一个名称,点确定,在打开的tunnel 属性中 ,上面tunnel配置中输入您国外的SSH登录信息,在下面的Post redirection(端口转发)处,点添加 类型(type)选择 dynamic(动态),随便输入一个端口,如8888,点确定返回,然后选中刚新建的tunnel 点 start.如图:</p>
<p><a href="http://www.elain.org/?attachment_id=341"><img src="http://www.elain.org/wp-content/uploads/2011/08/11-392x480.png" alt=""></a></p>
<p>&nbsp;</p>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/经验技巧/">经验技巧</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/firefox/">firefox</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gstm/">gstm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ubuntu/">ubuntu</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/翻墙/">翻墙</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a  href="/2011/08/08/ubuntu下使用gSTM+Firefox实现翻墙/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-WINDOWS下使用SecureCRT+FireFox代理实现翻墙" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/08/08/WINDOWS下使用SecureCRT+FireFox代理实现翻墙/" class="article-date">
      <time datetime="2011-08-07T18:03:18.000Z" itemprop="datePublished">2011-08-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/08/08/WINDOWS下使用SecureCRT+FireFox代理实现翻墙/">WINDOWS下使用SecureCRT+FireFox代理实现翻墙</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p>打开SecureCRT并新建一个会话,</p>
<pre><code>选择菜单栏的选项 =&amp;gt; 端口转发 输入Name：vpn(随便输)，Local那里勾选手工选择允许连接的IP,填入Ip 127.0.0.1，侦听端口，如8888；远程选项里直接勾选动态转发使用 SOCKS 4或5,然后重新登录一下。如图:
</code></pre><p><a href="http://www.elain.org/?attachment_id=334"><img src="http://www.elain.org/wp-content/uploads/2011/08/2-633x480.jpg" alt=""></a></p>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/经验技巧/">经验技巧</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/firefox/">firefox</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/windows/">windows</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/翻墙/">翻墙</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a  href="/2011/08/08/WINDOWS下使用SecureCRT+FireFox代理实现翻墙/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-earth-song-by-michael-jackson" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/08/07/earth-song-by-michael-jackson/" class="article-date">
      <time datetime="2011-08-07T07:15:08.000Z" itemprop="datePublished">2011-08-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/08/07/earth-song-by-michael-jackson/">Earth Song by Michael Jackson</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p><span style="font-size:16px"><span>What about sunrise</p>
<pre><code>What about rain

What about all the things

That you said we were to gain.. .

What about killing fields

Is there a time

What about all the things

That you said was yours and mine...

Did you ever stop to notice

All the blood we&amp;#039;ve shed before

Did you ever stop to notice

The crying Earth the weeping shores?

Aaaaaaaaaah Aaaaaaaaaah

What have we done to the world

Look what we&amp;#039;ve done&lt;/span&gt;&lt;/span&gt;
</code></pre>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/杂文随笔/">杂文随笔</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/earth/">earth</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a  href="/2011/08/07/earth-song-by-michael-jackson/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/19/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="page-number" href="/page/19/">19</a><span class="page-number current">20</span><a class="page-number" href="/page/21/">21</a><a class="page-number" href="/page/22/">22</a><span class="space">&hellip;</span><a class="page-number" href="/page/37/">37</a><a class="extend next" rel="next" href="/page/21/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2016 elain
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的静态博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减双栏 Hexo 博客主题">Yelee</a> by MOxFIVE
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >本站到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>

    <style>
        body {
          background: lightgray;
        }
        #container .left-col {
          background: white;
        }
        .article-inner {
          background: white;
          margin-bottom: 1em;
        }
        .post-nav-button {
          background: #ececec;
        }
        #header .header-nav .social #GitHub {
          background-color: #bfd3ec;
        }
        #post-nav-button a {
          background: rgba(215, 216, 215, .2);
        }
        .post-list {
          background: white;
        }
    </style>




<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>

<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>


<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>